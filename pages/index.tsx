import type { NextPage } from "next";
import Head from "next/head";
import Layout from "@/components/Layout";
import { useRouter } from "next/navigation";
import src from "@public/exam2.png";
import PostViewer from "@/components/PostViewer";
import axios from "axios";
import { FileType } from "@prisma/client";
import { useEffect, useState } from "react";
import Post from "./posts/[id]";
type PostComment = {};
type PostLike = {};
type Post = {
  id: number;
  address: string;
  contractId: number;
  createdAt: Date;
  updatedAt: Date;
  isDeleted: boolean;
  comments: PostComment[];
  likes: PostLike[];
};
interface PostsResponse {
  Posts: Post[];
}

const Home: NextPage = () => {
  const router = useRouter();
  const [data, setData] = useState<PostsResponse>();
  useEffect(() => {
    axios
      .get("api/posts")
      .then((response) => {
        setData(response.data);
      })
      .catch((error) => {
        console.log(error);
      });
  }, []);
  return (
    <Layout>
      <Head>
        <title>mybling | 마블링</title>
        <meta
          name="description"
          content="Generated by create next app"
        />
        <meta
          name="viewport"
          content="width=device-width, initial-scale=1"
        />
        <link
          rel="icon"
          href="/favicon.ico"
        />
      </Head>
      <div className=" grid-cols-1 space-y-7 p-5">
        {data?.Posts?.map((post) => (
          <PostViewer
            key={post.externalUrl}
            thumbnail={post.file}
            address={`posts/${post.externalUrl}`}
            content={post.description}
            UserName={"userName"}
            UserImage={
              "https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
            }
            likes={999}
            ownerName="KKKSSSGGG"
            ownerImage=""
          ></PostViewer>
        ))}
        <PostViewer
          thumbnail={src}
          address={`posts/${2}`}
          content={
            "책읽는 심슨이 있습니다. 그러나, 책을 읽는 것은 심슨 가족 중에서는 극적으로 드문 일이며, 그들은 대부분 이상한 모험을 즐기며 시간을 보냅니다며 시간을 보냅니다."
          }
          UserName={"userName"}
          UserImage={
            "https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
          }
          likes={999}
          ownerName="KKKSSSGGG"
          ownerImage=""
        ></PostViewer>
        <PostViewer
          thumbnail={src}
          address={`posts/${2}`}
          content={
            "책읽는 심슨이 있습니다. 그러나, 책을 읽는 것은 심슨 가족 중에서는 극적으로 드문 일이며, 그들은 대부분 이상한 모험을 즐기며 시간을 보냅니다."
          }
          UserName={"userName"}
          UserImage={
            "https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
          }
          likes={999}
          ownerName="KKKSSSGGG"
          ownerImage=""
        ></PostViewer>
        <PostViewer
          thumbnail={src}
          address={`posts/${2}`}
          content={
            "책읽는 심슨이 있습니다. 그러나, 책을 읽는 것은 심슨 가족 중에서는 극적으로 드문 일이며, 그들은 대부분 이상한 모험을 즐기며 시간을 보냅니다.책읽는 심슨이 있습니다. 그러나, 책을 읽는 것은 심슨 가족 중에서는 극적으로 드문 일이며, 그들은 대부분 이상한 모험을 즐기며 시간을 보냅니다.책읽는 심슨이 있습니다. 그러나, 책을 읽는 것은 심슨 가족 중에서는 극적으로 드문 일이며, 그들은 대부분 이상한 모험을 즐기며 시간을 보냅니다."
          }
          UserName={"userName"}
          UserImage={
            "https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
          }
          likes={999}
          ownerName="KKKSSSGGG"
          ownerImage=""
        ></PostViewer>
        <PostViewer
          thumbnail={src}
          address={`posts/${2}`}
          content={
            "책읽는 심슨이 있습니다. 그러나, 책을 읽는 것은 심슨 가족 중에서는 극적으로 드문 일이며, 그들은 대부분 이상한 모험을 즐기며 시간을 보냅니다."
          }
          UserName={"userName"}
          UserImage={
            "https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
          }
          likes={999}
          ownerName="KKKSSSGGG"
          ownerImage=""
        ></PostViewer>
      </div>
    </Layout>
  );
};

export default Home;
